# Phase 1 Integration Architecture

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BROWSER (User Interface)                         â”‚
â”‚                      http://localhost:3000                          â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Next.js React Dashboard (TypeScript)                â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚  /backtest   â”‚  â”‚ /strategies  â”‚  â”‚  /backtest-  â”‚       â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚   history    â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  - Form      â”‚  â”‚  - Grid      â”‚  â”‚  - Filter    â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  - Execute   â”‚  â”‚  - Details   â”‚  â”‚  - List      â”‚       â”‚  â”‚
â”‚  â”‚  â”‚  - Results   â”‚  â”‚  - Test Link â”‚  â”‚  - Drill-In  â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚         â”‚                â”‚                    â”‚               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚     /backtest-results/[id]                   â”‚            â”‚  â”‚
â”‚  â”‚  â”‚  - Metrics Display                           â”‚            â”‚  â”‚
â”‚  â”‚  â”‚  - Equity Curve Chart                        â”‚            â”‚  â”‚
â”‚  â”‚  â”‚  - Drawdown Analysis                         â”‚            â”‚  â”‚
â”‚  â”‚  â”‚  - Trade Log                                 â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â”‚         â”‚                                                     â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚                            â”‚                       â”‚          â”‚  â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚   quantApi Client               â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚   (lib/api/quantApi.ts)         â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚                                 â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  â€¢ runBacktest()                â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  â€¢ getStrategies()              â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  â€¢ getBacktestResults()         â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  â€¢ getBacktestsByStrategy()     â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  â€¢ health()                     â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚                                 â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  Features:                      â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  âœ“ TypeScript Interfaces        â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  âœ“ Error Handling               â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  âœ“ Environment Config           â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â”‚  âœ“ Singleton Pattern            â”‚   â”‚          â”‚  â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚          â”‚  â”‚
â”‚  â”‚                        â”‚                            â”‚          â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚                   â”‚                        â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚   Shared Components                        â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚                   â”‚                        â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â”‚ BacktestMetr â”‚ â”‚ â”‚ BacktestChart    â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â”‚ ics Component â”‚ â”‚ â”‚ Component        â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â”‚              â”‚ â”‚ â”‚ (Recharts)       â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â”‚ â€¢ 12+ Metricsâ”‚ â”‚ â”‚ â€¢ Equity Curve   â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â”‚ â€¢ Grid Layoutâ”‚ â”‚ â”‚ â€¢ Drawdown Chart â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â”‚ â€¢ Color Code â”‚ â”‚ â”‚ â€¢ Responsive     â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚                    â”‚                       â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚    Sidebar (Updated)                       â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚    â€¢ Backtest Link (âš¡)                    â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚    â€¢ Strategies Link (ğŸ“ˆ)                 â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â”‚    â€¢ Backtest History Link (ğŸ•)           â”‚  â”‚          â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  â”‚
â”‚  â”‚                                                  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚  â”‚  Configuration                            â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚  â”‚  .env.local:                              â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚  â”‚  NEXT_PUBLIC_API_URL=                     â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚  â”‚  http://localhost:8080/api/quant          â”‚  â”‚  â”‚          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  â”‚
â”‚              â”‚                                         â”‚          â”‚  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚                                â”‚                                  â”‚  â”‚
â”‚                      Network (HTTP/REST)                          â”‚  â”‚
â”‚                                â”‚                                  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 BACKEND SERVER (Spring Boot)                         â”‚
â”‚                  http://localhost:8080                               â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              REST API Layer (/api/quant)                     â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  POST   /backtest           - Execute new backtest          â”‚  â”‚
â”‚  â”‚  GET    /backtest/{id}      - Get specific results          â”‚  â”‚
â”‚  â”‚  GET    /strategies         - List all strategies           â”‚  â”‚
â”‚  â”‚  GET    /backtest/strategy/{name} - Filter by strategy      â”‚  â”‚
â”‚  â”‚  GET    /health             - Health check                  â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                                           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                    â”‚                      â”‚             â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Strategy Service  â”‚   â”‚ Backtest Service  â”‚   â”‚   Portfolio  â”‚ â”‚
â”‚  â”‚                   â”‚   â”‚                   â”‚   â”‚   Service    â”‚ â”‚
â”‚  â”‚ â€¢ Load strategies â”‚   â”‚ â€¢ Execute strategyâ”‚   â”‚              â”‚ â”‚
â”‚  â”‚ â€¢ Validate params â”‚   â”‚ â€¢ Calculate metricsâ”‚   â”‚ â€¢ Track      â”‚ â”‚
â”‚  â”‚ â€¢ Return metadata â”‚   â”‚ â€¢ Generate trades â”‚   â”‚   values     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                   â”‚                       â”‚             â”‚         â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜         â”‚
â”‚                                       â”‚               â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Data Layer                                      â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚  Strategies  â”‚  â”‚   Backtests  â”‚  â”‚ PortfolioValues    â”‚â”‚ â”‚
â”‚  â”‚  â”‚  Table       â”‚  â”‚   Table      â”‚  â”‚ (TimescaleDB)      â”‚â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚                    â”‚â”‚ â”‚
â”‚  â”‚  â”‚  - name      â”‚  â”‚  - id        â”‚  â”‚ - portfolioId      â”‚â”‚ â”‚
â”‚  â”‚  â”‚  - descr     â”‚  â”‚  - strategy  â”‚  â”‚ - timestamp        â”‚â”‚ â”‚
â”‚  â”‚  â”‚  - indicatorsâ”‚  â”‚  - symbol    â”‚  â”‚ - value            â”‚â”‚ â”‚
â”‚  â”‚  â”‚  - minBars   â”‚  â”‚  - results   â”‚  â”‚ - trades           â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    PostgreSQL + TimescaleDB                                 â”‚ â”‚
â”‚  â”‚    - Persistent backtest results                            â”‚ â”‚
â”‚  â”‚    - Historical portfolio values                            â”‚ â”‚
â”‚  â”‚    - Strategy metadata                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
User Action                 API Request                 Backend Processing
    â”‚                           â”‚                             â”‚
    â”‚                           â”‚                             â”‚
    â–¼                           â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fill Form  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  quantApi    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  Backtest      â”‚
â”‚  (Backtest) â”‚           â”‚ .runBacktest â”‚           â”‚  Service       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                â”‚
                                 â–²                   â”‚ 1. Validate    â”‚
                                 â”‚                   â”‚ 2. Execute     â”‚
                                 â”‚                   â”‚ 3. Calculate   â”‚
                                 â”‚                   â”‚ 4. Persist     â”‚
                                 â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                           â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â–¼
                          â”‚ REST POST    â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ /backtest    â”‚           â”‚ Database       â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                â”‚
                                 â–²                   â”‚ Save Results   â”‚
                                 â”‚                   â”‚ Save Metrics   â”‚
                                 â”‚                   â”‚ Save Trades    â”‚
                                 â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                           â”‚
                                 â”‚                           â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ HTTP 200     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Return ID      â”‚
                          â”‚ {result: {}}  â”‚           â”‚ + Metrics      â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Parse Response  â”‚
                          â”‚  Update State    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Render Components             â”‚
                    â”‚  â€¢ BacktestMetrics             â”‚
                    â”‚  â€¢ BacktestChart               â”‚
                    â”‚  â€¢ Trade Log Table             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  User Sees       â”‚
                           â”‚  Results & Chartsâ”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Dependency Tree

```
app/
â”œâ”€â”€ backtest/page.tsx
â”‚   â”œâ”€â”€ Uses: quantApi
â”‚   â”œâ”€â”€ Uses: BacktestMetrics (component)
â”‚   â”œâ”€â”€ Uses: BacktestChart (component)
â”‚   â””â”€â”€ State: formData, results, loading, error
â”‚
â”œâ”€â”€ strategies/page.tsx
â”‚   â”œâ”€â”€ Uses: quantApi.getStrategies()
â”‚   â””â”€â”€ Renders: Strategy cards with test links
â”‚
â”œâ”€â”€ backtest-history/page.tsx
â”‚   â”œâ”€â”€ Uses: quantApi.getBacktestsByStrategy()
â”‚   â””â”€â”€ Renders: Results list with drill-in links
â”‚
â””â”€â”€ backtest-results/[id]/page.tsx
    â”œâ”€â”€ Uses: quantApi.getBacktestResults(id)
    â”œâ”€â”€ Uses: BacktestMetrics (component)
    â”œâ”€â”€ Uses: BacktestChart (component)
    â””â”€â”€ Renders: Trade log table

components/
â”œâ”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ Added: 3 new navigation items
â”‚   â”œâ”€â”€ â†’ /backtest
â”‚   â”œâ”€â”€ â†’ /strategies
â”‚   â””â”€â”€ â†’ /backtest-history
â”‚
â””â”€â”€ quant/
    â”œâ”€â”€ BacktestMetrics.tsx
    â”‚   â”œâ”€â”€ Input: BacktestResult interface
    â”‚   â””â”€â”€ Output: 12+ metrics grid
    â”‚
    â””â”€â”€ BacktestChart.tsx
        â”œâ”€â”€ Input: BacktestResult interface
        â”œâ”€â”€ Library: Recharts
        â””â”€â”€ Output: 2 charts (equity, drawdown)

lib/
â””â”€â”€ api/
    â””â”€â”€ quantApi.ts
        â”œâ”€â”€ Class: QuantApi
        â”œâ”€â”€ Methods:
        â”‚   â”œâ”€â”€ health()
        â”‚   â”œâ”€â”€ getStrategies()
        â”‚   â”œâ”€â”€ runBacktest()
        â”‚   â”œâ”€â”€ getBacktestResults()
        â”‚   â””â”€â”€ getBacktestsByStrategy()
        â”‚
        â”œâ”€â”€ Interfaces:
        â”‚   â”œâ”€â”€ BacktestRequest
        â”‚   â”œâ”€â”€ BacktestResult
        â”‚   â”œâ”€â”€ Strategy
        â”‚   â”œâ”€â”€ Trade
        â”‚   â””â”€â”€ Response types
        â”‚
        â””â”€â”€ Export: quantApi (singleton)
```

## Technology Stack

```
Frontend (React/Next.js)
â”‚
â”œâ”€â”€ UI Framework
â”‚   â”œâ”€â”€ Next.js 13+ (App Router)
â”‚   â”œâ”€â”€ React 18+
â”‚   â””â”€â”€ TypeScript 5+
â”‚
â”œâ”€â”€ Styling
â”‚   â”œâ”€â”€ Tailwind CSS
â”‚   â””â”€â”€ Dark Theme (gray-900)
â”‚
â”œâ”€â”€ Charts
â”‚   â”œâ”€â”€ Recharts 2+
â”‚   â”œâ”€â”€ Line Charts
â”‚   â””â”€â”€ Responsive Containers
â”‚
â”œâ”€â”€ Icons
â”‚   â””â”€â”€ Lucide React
â”‚
â””â”€â”€ Communication
    â””â”€â”€ Fetch API (native)

Backend (Spring Boot/Java)
â”‚
â”œâ”€â”€ Framework
â”‚   â”œâ”€â”€ Spring Boot 3.2.0
â”‚   â””â”€â”€ Java 21
â”‚
â”œâ”€â”€ Endpoints
â”‚   â””â”€â”€ REST API (/api/quant)
â”‚
â””â”€â”€ Database
    â”œâ”€â”€ PostgreSQL
    â””â”€â”€ TimescaleDB (for time-series)
```

## Environment Variables

```
Frontend (.env.local)
â”œâ”€â”€ NEXT_PUBLIC_API_URL
â”‚   â””â”€â”€ http://localhost:8080/api/quant
â”‚
â””â”€â”€ (Others: auto-configured)

Backend (application.yml)
â”œâ”€â”€ server.port: 8080
â”œâ”€â”€ database: PostgreSQL
â””â”€â”€ api.base-path: /api/quant
```

## Security & Error Handling

```
API Client (quantApi.ts)
â”‚
â”œâ”€â”€ Error Handling
â”‚   â”œâ”€â”€ Try-catch blocks
â”‚   â”œâ”€â”€ Descriptive error messages
â”‚   â”œâ”€â”€ User-friendly alerts
â”‚   â””â”€â”€ Fallback states
â”‚
â”œâ”€â”€ Type Safety
â”‚   â”œâ”€â”€ TypeScript interfaces
â”‚   â”œâ”€â”€ Compile-time checking
â”‚   â””â”€â”€ IDE autocomplete
â”‚
â””â”€â”€ Configuration
    â”œâ”€â”€ Environment variables
    â”œâ”€â”€ No hardcoded URLs
    â””â”€â”€ Easy deployment

Backend API
â”‚
â”œâ”€â”€ Input Validation
â”‚   â”œâ”€â”€ Date range checks
â”‚   â”œâ”€â”€ Symbol format validation
â”‚   â””â”€â”€ Capital amount checks
â”‚
â”œâ”€â”€ Error Responses
â”‚   â”œâ”€â”€ HTTP status codes
â”‚   â”œâ”€â”€ Error messages
â”‚   â””â”€â”€ Stack traces (dev mode)
â”‚
â””â”€â”€ CORS
    â””â”€â”€ Configured for dashboard origin
```

## Deployment Paths

```
Development
â”œâ”€â”€ Terminal 1: cd aero && npm run dev
â”œâ”€â”€ Terminal 2: cd quickfix-dashboard && npm run dev
â””â”€â”€ Access: http://localhost:3000

Production
â”œâ”€â”€ Build backend: mvn clean package
â”œâ”€â”€ Build frontend: npm run build
â”œâ”€â”€ Deploy via Docker or Kubernetes
â””â”€â”€ Update NEXT_PUBLIC_API_URL for prod domain

Staging
â”œâ”€â”€ Intermediate environment
â”œâ”€â”€ Configuration update
â””â”€â”€ Pre-production testing
```

---

**This architecture ensures:**
- âœ… Type-safe frontend-backend communication
- âœ… Scalable and maintainable code structure
- âœ… Clear separation of concerns
- âœ… Reusable components and services
- âœ… Easy to extend with new features
